#!/usr/bin/env bash

FULLNAME="$0"
cd /var/log/sphere-store-kela
WS_OPTS="-server -XX:+HeapDumpOnOutOfMemoryError -XX:MaxPermSize=128m -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:-PrintCompilation"
if [ -e "/etc/sphere-store-kela/ws_opts" ]; then
    . "/etc/sphere-store-kela/ws_opts"
fi

echo "Starting Sphere store kela"

exec -a "${FULLNAME}" \
    java ${WS_OPTS} \
    "$@" \
    -cp "/usr/share/sphere-store-kela/*" \
    -Dconfig.file=/etc/sphere-store-kela/application.conf \
    -Dhttp.port=8888 \
    play.core.server.NettyServer .
